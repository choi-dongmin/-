# AWS와 웹 서비스
- 과거 시스템 기반 : 어플리케이션 사용자가 24h 사용할 수 있도록 환경을 제공하는 기술 요소.
- 구성요소
	1. 서버 
	2. 네트워크 
	3. UPS : 안정적인 전원 제어관리
	4. 안정적인 구동환경 제공 
	5. 물리적 보안
	6. 재해대책 
* 과거 이러한 데이터 센터의 물리적 제약이 있었지만 cloud를 통하여 물리적 제약을 벗어나고 있다.


## 기존의 서버 구성 방식
- 특정 데이터센터라는 공간을 구성
- 물리적인 서버 + 네트워크 + 재해관련 시스템 + UPS 등 을 구성
* 초기 구성을 하는것에 큰 자본이 발생

What is Datacenter ?
- 시스템 기반의 환경을 제공하기 위해 각 구성 요소를 제공하는 시설.
- 거대한 구조의 시스템을 안정적으로 관리하기 위해서 집합적으로 관리

# 클라우트 컴퓨팅
- 네트워크를 통해 개인의 컴퓨터가 아닌 원격 컴퓨터 자원을 활용하는 기술
- 인터넷이 있다면 언제 어디서든지 사용이 가능하다.
- 사용한 만큼 비용을 지불 (장점이자 단점이 된다.)

* 즉, 기존의 서버의 구성 방식은 특정 데이터 센터의 물리적 공간 + 서버 + UPS 등을 구성하기 위해 초기에 매우 큰 자본이 발생하였다. 그래서 비용절감 및 물리적 제역을 넘어 언제 어디서나 네트워크를 통해 원격의 컴퓨터 자원, 가상의 인스턴스를 활용 할 수 있는 기술이 클라우드 컴퓨팅이다.

## 클라우드 컴퓨팅의 특징
	1. 비용
		- 초기비용이 들지 않으며 인력과 시간에 대한 값이 효율적이다.
		- 사용한 만큼 지불한다.
		- 오래 사용한다면 그만큼 부담이 크다.

	2. 저장 공간의 스케일링 
		- 확장성의 제공이 매우 빠르다

	3. 속도
		- 배포 및 확장 속도가 매우 빠르다

## 클라우드 컴퓨팅의 분류 : 서비스 유형

1. IaaS (Infrastructure as a Service)
	- 서버, OS, 네트워크, 저장소 등을 제공
	- 필요로 하는 자원을 규모 및 신뢰도 등에 의해 비용 결정
	- 즉, 가장 기본적인 시스템 리소스만 제공한다

2. PaaS (Platform as a Service)
	- 소프트웨어 개발 및 운영 환경을 제공
	- 인프라에 대한 관리 부담을 줄이며 개발하는 환경 제공
	- 즉, 개발자나 관리자가 필요한 미들웨어 까지 준비해 개발 및 운영환경을 제공한다.

3. SaaS (Software as a Service)
	- Endpoint 사용자가 설치해서 바로 사용 할 수 있게 하는 환경
	- 즉, APP까지 설치해 사용자가 바로 사용 할 수 있게 하는 환경


# 인프라의 구성 방식
1. On-Premises 
	- 과거로 부터 사용된 데이터 센터 혹은 서벌실과 같은 방식
	- 장기적 관점에서는 구성에 따라 더 낮은 비용이 발생

2. Cloud
	* Public Cloud 
		- 인터넷을 통한 불특정 다수에게 클라우드를 제공한다.
		- 초기 투자가 필요 없지만 클라우드 시스템의 크키가 커짐에 따라사용료가 점점 증가 될 수 있다.
		- AWS(Amazon), Azure(MS), GCP(Google)

	* Private Cloud
		- 특정한 대상을 지정해 서비스를 제공하는 클라우드 서비스
		- 주로 단일 기업 혹은 그 계열사 등 일부 기업을 대상으로 서비스하기 위해 구축
		- 비용이 높지만 퍼포먼스 및 보안성도 높다.

	* Hybrid Cloud
		- Public Cloud / Private Cloud 를 필요에 의해 적절히 섞은 클라우드 인프라 구성.

## 클라우드 서비스 선택 주의사항
1. 가용성 클라우드 벤더와의 계약에 따라 가용성 수준 이상의 서비스를 제공하는 경우
	- 완벽한 무중단이 필요한 경우 가용성 조건 만족이 불가하다.
2. 데이터 저장 유치
	- 클라우드 서비스에 저장된 데이터는 위치가 명확하지 않다
	- 물리적 보관 장소가 명확해야한다면 사용 불가
3. 특수요건 충종 불가
	- 범용적이지 않은 시스템은 지원하지 않는다.
4. 비용에 대해 고려
	- 클라우드가 항상 저렴한게 아니다

# AWS
- 아마존에서 제공하는 클라우드 인프라로 전세계의 클라우드 시장의 30% 이상을 차지하고 있다.
- 많은 서비스가 존재하지만 대표적인 카테고리로 컴퓨팅, 네트워크, 스토리지 서비스가 있다.

## 컴퓨팅 서비스
1. EC2 : 인스턴스를 만들고 관리하는 대표적인 서비스
2. Auto Scaling : 특정 조건에 따라 서버를 추가/삭제
3. LightSail : 가상 사설 서버, 간단한 웹 서버 운영
4. Workspace : 데스크톱 가상화 서비스 / 사내 PC를 가상화로 구성해 클라우드를 통한 업무환경 구축

## 네트워크 서비스
1. Route 53 : 가용성, 확장성이 편한 DNS 서비스
2. VPC : 가상 사설 네트워크 인프라를 클라우드 내에서 생성 및 구성

## 스토리지 서비스
1. S3
	- Simple Storage Service 
	- 여러 용도로 사용 가능한 범용 스토리지
	- 데이터 보관 및 정적 웹 사이트 호스팅 제공 가능 
2. S3 Glacier
	- 사용 빈도가 높지 않은 데이터 보관 용도로 사용
	- 가격이 저렴
3. EBS
	- Elastic Block Storage
	- EC2 등 서버에 스토리지로 추가해 데이터를 보관하는 용도로 사용
	- SSD를 사용해 입출력 속도가 매우 우수
4. Storage Gateway
	- 온프레미스의 데이터를 클라우드로 저장 보관하기 위한 Gateway
5. Snowball 
	- 대량의 데이터 전송을 위한 가상의 장치를 제공하는 서비스


## EC2
- 리전
	* 전세계적으로 물리적으로 구분된 AWS 서비스 지역
	* 가장 가까운 Region을 사용해 빠른 속도의 서비스 이용 
	* 필요에 따라 다른 리전 사용 가능
	* 리전 별로 구성 할 수 있는 기능이 다르다

- 가용 영역
	*데이터 센터를 의미
	* 하나의 리전에 다수의 가용영역이 존재
	* 각 가용 영역이 위치한 데이터 센터는 물리적으로 떨어져 있다
	* 서울은 4개의 가용영역이 존재

- 엣지 로케이션
	* CDN을 위한 캐시서버
	* AWS Cloud Front를 위해 사용됨

- 서버
	 * 특정한 업무 및 서비스를 수행하는 컴퓨터
	 * 일반적 컴퓨터보다 고사양이다
	 * Unix, Linux 등 서버 전용 OS 사용

- 스토리지
	* 데이터를 저장/검색/사용/삭제 하는 공간
	*스토리지 안정성 성능을 위해 RAID, LVM, EBS 등을 이용

- 보안
	* 안전한 상태를 유지 시키는것
	* 위험으로 부터 데이터를 보호
	* IAM : 사용자 및 키관리, 접근성
	* Grand duty : 관리형 위험 탐지
	* Shield : DDos로 부터 보호

- 방화벽
	* 외부 네트워크에 연결된 포인트에서 내부 네트워크로 불법적인 침입을 보호
	* AWS Default : Amazon Security Group

## AMI 만들기 
- Virtual Box 에서 마치 ova 파일을 만드는 것과 같은 역할로 인스턴스를 그 상태 그 인터페이스로 저장할 수 있다.
- 순서
1. 인스턴스 생성
2. 인스턴스 연결 후 mkdir ~/test 파일 작업
3. 인스턴스 목록에서 선택 후 작업 버튼에서 이미지 및 템플릿 항목의 이미지 생성 선택
4. 이미지 이름만 지정 후 생성
5. 조금 기다렸다가 인스턴스 생성 시 내 AMI 항목에서 새로만든 이미지 선택 후 생성
6. 인스턴스 cd /~test 작업 내용들 확인.


## EBS
- EC2 의 데이터를 저장하는 용도의 블록 기반 스토리지
- 안정적이며 지연시간이 짧다
- 1G 부터 1T 까지 선택 가능
- EC2와 별개로 사용 가능 (타 EC2 인스턴스에 저장이 가능)
- 데이터는 영구적으로 저장됨
- 스냅샷을 통한 백업 복제 기능 제공 (타 리전/사용자에게 복사 가능)
- 스토리지 종류 / 인스턴스에 따라 성능 향상 가능

## EBS 볼륨 유형
1. 범용 SSD 
	- 다양한 용도로 사용
	- For EC2 boot volume

2. 프로비저닝된 IPOS
	- 지연 시간에 민감한 고성능 처리
	- For NoSQL, RDBMS 

3. 처리량 최적화 HDD
	- 엑세스가 잦으며 처리량이 높음
	- For log, Bigdata

4. 콜드 HDD
	- 엑세스 빈도가 낮은 저비용 저장소
	- For 일자별 작업

5. 마그네틱
	- 빈도가 낮으며 성능이 낮은 저장소
	- Backup

## EBS 스냅샷
- 스냅샷 생성중 EBS 사용 가능 
- EBS 볼륨 크기 조정에 사용 (스냅샷을 찍고 그 스냅샷을 바탕으로 크기를 조절하며 세팅한다)
- 공유 기능을 통해 권한이 있는 다른 사용자에게 공유 가능
- 복귀를 리전 단위로 가능
- 원하는 리전으로 확장/이전 및 재해복구 가능

## 성능 및 보안
- 스토리지 성능을 향상 시키는 법
	* 프로비저닝이 된 IOPS 사용
	* EBS에 최적화된 인스턴스를 사용 : 스토리지를 위한 전용 네트워크 대역폭 할당

- EBS 암호화
	* EBS에 대한 AES-256 암호화로 데이터 보호

## 아마존 시큐리티 그룹
- 아마존 보안 그룹 : 방화벽
- 인스턴스에 대한 Inbound, outbound 트래픽 제어
- 인스턴스당 최당 5개 보안그룹 할당
- 기본적으로 Access 가능 Dneied 불가능 
- 인바운드 : 외부에서 안으로 들어올때
- 아웃바운드 : 안에서 외부로 나아갈때 (SG에서는 수정이 불가)

## 보안그룹 ICMP 사용
1. 퍼블릭 인스턴스 생성

2. 외부에서 해당 인스턴스로 접속
	![화면 캡처 2022-05-31 231939](https://user-images.githubusercontent.com/57117748/171196121-005511f4-3c1e-497d-9a6b-c838e2b0b511.png)

4. 보안그룹에서 ICMP 허용 규칙 추가

5. 3번 테스트 다시

6. 보안그룹 규칙 수정에서 ssh 패킷 허용 시 주소를 무작위로 변경하고 저장
![화면 캡처 2022-05-31 232536](https://user-images.githubusercontent.com/57117748/171197501-93377291-154a-4e86-a721-6d0dc9f38ff6.png)

7. 다시 ssh 접속 시도.


## 키워드 
- 클라우드 : 기존의 On-Premises  의 시스템의 물리적 제약을 해결하기 위 네트워크를 통해 개인의 컴퓨터가 아닌 원격 컴퓨터 자원을 활용하는 기술

- 인프라의 구성방식 : On-Premises, Public Cloud, Private Cloud, Hybrid Cloud로 이루어 진다.

- EC2 : AWS에서 제공하는 컴퓨팅 서비스로 원격으로 컴퓨터 자원 및 인터페이스를 구매해 사용한 만큼 돈을 지불한다

- EBS : EC2의 데이터 저장을 지원하는 블록 기반의 스토리지 서비스이다. 스냅샷 기능을 지원하면서 EBS 볼륨 크기 조정에도 스냅샷을 사용한다 

- 아마존 시큐리티 그룹 : 인스턴스의 보안을 위한 방화벽 개념 Inbound, outbound 트래픽제어
